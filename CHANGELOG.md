# Changelog

## [1.0.1] - 2025-07-04

### 追加
- **開発コマンドモード**: 危険モードよりも安全に特定の開発用コマンドを実行可能
  - `tasklist`, `netstat`, `type`, `python`, `pip`などの開発ツールを許可
  - コマンド連結（`&&`, `||`, `|`）のサポート
  - バッチファイル実行のサポート（許可されたパス内のみ）
  - 実行パスの制限（`C:\builds\`, `C:\projects\`, `C:\dev\`）
- **バージョン表示**: サーバー起動時にバージョン番号を表示

### ドキュメント
- 開発コマンドモードの詳細な設定方法と使用例を追加
- 環境変数一覧に開発モード設定を追加

## [1.1.0] - 2025-07-03

### セキュリティ強化

#### 🔒 重大なセキュリティ修正
- **コマンドインジェクション対策**: `shell: true`を削除し、安全なコマンド実行方式に変更
- **タイムアウト処理**: すべてのコマンド実行とSSH接続にタイムアウトを実装
- **SSH認証情報の暗号化**: AES-256-GCM暗号化によるパスワード保護

#### 🛡️ セキュリティ機能の追加
- 環境変数の起動時検証
- 本番環境での必須設定チェック
- パスワード暗号化ユーティリティ (`server/setup/encrypt-password.js`)
- SSH接続ログの改善（パスワードのハッシュ化）

### 🐛 バグ修正
- `stdout`/`stderr`が未定義の場合のエラーハンドリング改善
- PowerShellコマンドの実行方式を修正
- テストのモック改善による安定性向上

### 📚 ドキュメント
- セキュリティベストプラクティスの更新
- 新機能の詳細な説明を追加
- パスワード暗号化の手順を追加

### 🔧 技術的改善
- `child_process.spawn`の安全な使用
- プロセスのタイムアウトとクリーンアップ
- エラーハンドリングの一貫性向上

### 📁 ビルド管理の改善
- 固定ビルドディレクトリ構造: `C:\build\<project-name>\`
- プロジェクトリポジトリ全体の保存
- リリース成果物の専用ディレクトリ: `C:\build\<project-name>\release\`
- xcopyによるプロジェクト構造の保持

## [1.0.0] - 初期リリース

### 機能
- Windows VM上でのMCPサーバー実装
- .NETアプリケーションのリモートビルド
- PowerShellコマンドの安全な実行
- NordVPNメッシュネットワーク対応
- SSH経由のリモート実行
- 包括的なセキュリティ機能
  - IPホワイトリスト
  - レート制限
  - Bearer認証
  - コマンド検証
  - パストラバーサル防止
# Windows MCP Server - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ v1.0.6

## ğŸ“ ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

Windows MCP Serverã¯ã€MCPï¼ˆModel Context Protocolï¼‰ã‚’å®Ÿè£…ã—ãŸåˆ†æ•£ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚macOS/Linuxã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚‰Windowsç’°å¢ƒã§ã®ãƒªãƒ¢ãƒ¼ãƒˆé–‹ç™ºãƒ»ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MCP Client    â”‚    â”‚  Bridge Client  â”‚    â”‚  Windows Server â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚Claude Code  â”‚ â”‚    â”‚ â”‚mcp-client.jsâ”‚ â”‚    â”‚ â”‚ server.js   â”‚ â”‚
â”‚ â”‚Gemini-CLI   â”‚ â”‚â—„â”€â”€â–ºâ”‚ â”‚             â”‚ â”‚â—„â”€â”€â–ºâ”‚ â”‚             â”‚ â”‚
â”‚ â”‚Other MCP    â”‚ â”‚    â”‚ â”‚ HTTP Client â”‚ â”‚    â”‚ â”‚Express+MCP  â”‚ â”‚
â”‚ â”‚Tools        â”‚ â”‚    â”‚ â”‚ Auth Mgr    â”‚ â”‚    â”‚ â”‚ Protocol    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      macOS/Linux            macOS/Linux              Windows VM
```

## ğŸ”§ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆè©³ç´°

### 1. MCPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå±¤
- **å½¹å‰²**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- **å¯¾å¿œãƒ„ãƒ¼ãƒ«**: Claude Code, Gemini-CLI, ã‚«ã‚¹ã‚¿ãƒ MCPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
- **ãƒ—ãƒ­ãƒˆã‚³ãƒ«**: MCP over stdio/HTTP
- **æ©Ÿèƒ½**: è‡ªç„¶è¨€èªâ†’MCPã‚³ãƒãƒ³ãƒ‰å¤‰æ›

### 2. ãƒ–ãƒªãƒƒã‚¸ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå±¤
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `client/src/mcp-client.js`
- **å½¹å‰²**: MCPãƒ—ãƒ­ãƒˆã‚³ãƒ«å¤‰æ›ã¨HTTPé€šä¿¡
- **èªè¨¼**: Bearer tokenç®¡ç†
- **è¨­å®š**: ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹å‹•çš„è¨­å®š

### 3. Windows MCP Serverå±¤
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `server/src/server.js`
- **å½¹å‰²**: MCPãƒ—ãƒ­ãƒˆã‚³ãƒ«å®Ÿè£…ã¨Windows APIçµ±åˆ
- **ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Express.js + Node.js
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: å¤šå±¤é˜²å¾¡ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

## ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
Request Flow:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Client    â”‚â”€â”€â”€â–ºâ”‚    Auth     â”‚â”€â”€â”€â–ºâ”‚Rate Limiter â”‚â”€â”€â”€â–ºâ”‚   Router    â”‚
â”‚   Request   â”‚    â”‚ Validator   â”‚    â”‚   Check     â”‚    â”‚  Handler    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚                   â”‚                   â”‚
                           â–¼                   â–¼                   â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚   Token     â”‚    â”‚    Rate     â”‚    â”‚  Command    â”‚
                   â”‚ Validation  â”‚    â”‚  Tracking   â”‚    â”‚ Validation  â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚                   â”‚                   â”‚
                           â–¼                   â–¼                   â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚             Security Logger                         â”‚
                   â”‚  access.log | security.log | error.log | app.log   â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ã‚¤ãƒ¤ãƒ¼

#### 1. èªè¨¼ãƒ¬ã‚¤ãƒ¤ãƒ¼
- **Bearer Tokenèªè¨¼**: 32æ–‡å­—ãƒ©ãƒ³ãƒ€ãƒ ãƒˆãƒ¼ã‚¯ãƒ³
- **IPã‚¢ãƒ‰ãƒ¬ã‚¹åˆ¶é™**: CIDRå½¢å¼ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆ
- **ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†**: ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¬ã‚¹èªè¨¼

#### 2. èªå¯ãƒ¬ã‚¤ãƒ¤ãƒ¼
- **ã‚³ãƒãƒ³ãƒ‰æ¤œè¨¼**: ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆæ–¹å¼
- **ãƒ‘ã‚¹åˆ¶é™**: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒˆãƒ©ãƒãƒ¼ã‚µãƒ«å¯¾ç­–
- **æ¨©é™åˆ†é›¢**: é€šå¸¸/é–‹ç™º/å±é™ºãƒ¢ãƒ¼ãƒ‰

#### 3. ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒ¬ã‚¤ãƒ¤ãƒ¼
- **é©å¿œå‹åˆ¶é™**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¢ãƒ¼ãƒ‰ã«å¿œã˜ãŸå‹•çš„åˆ¶å¾¡
- **IPãƒ™ãƒ¼ã‚¹è¿½è·¡**: ãƒ¡ãƒ¢ãƒªå†…ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼
- **å±é™ºãƒ¢ãƒ¼ãƒ‰ä¾‹å¤–**: é–‹ç™ºåŠ¹ç‡å„ªå…ˆ

#### 4. ãƒ­ã‚°ãƒ»ç›£æŸ»ãƒ¬ã‚¤ãƒ¤ãƒ¼
- **æ§‹é€ åŒ–ãƒ­ã‚°**: JSONå½¢å¼ã§ã®è©³ç´°è¨˜éŒ²
- **ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³**: ã‚µã‚¤ã‚ºãƒ™ãƒ¼ã‚¹è‡ªå‹•ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
- **åˆ†é¡åˆ¥ä¿å­˜**: ã‚¢ã‚¯ã‚»ã‚¹ãƒ»ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ã‚¨ãƒ©ãƒ¼ãƒ»ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

## ğŸ—‚ï¸ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
make-windows-mcp/
â”œâ”€â”€ client/                    # ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ mcp-client.js     # MCPãƒ–ãƒªãƒƒã‚¸ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ setup/
â”‚   â”‚   â””â”€â”€ production-setup.js
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ server/                    # ã‚µãƒ¼ãƒãƒ¼å´ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ server.js         # ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒãƒ¼å®Ÿè£…
â”‚   â”‚   â””â”€â”€ utils/            # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚   â”‚       â”œâ”€â”€ security.js   # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ¤œè¨¼
â”‚   â”‚       â”œâ”€â”€ logger.js     # æ§‹é€ åŒ–ãƒ­ã‚°
â”‚   â”‚       â”œâ”€â”€ rate-limiter.js
â”‚   â”‚       â”œâ”€â”€ crypto.js     # æš—å·åŒ–æ©Ÿèƒ½
â”‚   â”‚       â””â”€â”€ helpers.js    # å…±é€šãƒ˜ãƒ«ãƒ‘ãƒ¼
â”‚   â”œâ”€â”€ setup/
â”‚   â”‚   â”œâ”€â”€ windows-setup.ps1 # Windowsç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
â”‚   â”‚   â””â”€â”€ update-from-git.ps1
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ tests/                     # ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ
â”œâ”€â”€ docs/                      # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â””â”€â”€ examples/                  # ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
```

## ğŸ”„ ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 1. åŸºæœ¬çš„ãªã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    participant U as User
    participant C as Claude Code
    participant B as Bridge Client
    participant S as MCP Server
    participant W as Windows API

    U->>C: "Build .NET project"
    C->>B: MCP tools/call request
    B->>S: HTTP POST /mcp
    S->>S: Auth & Rate Check
    S->>S: Command Validation
    S->>W: spawn('dotnet', ['build'])
    W-->>S: Build Output
    S-->>B: MCP Response
    B-->>C: Formatted Result
    C-->>U: "Build completed successfully"
```

### 2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ¤œè¨¼ãƒ•ãƒ­ãƒ¼

```mermaid
flowchart TD
    A[Request] --> B{Auth Token?}
    B -->|No| C[401 Unauthorized]
    B -->|Yes| D{Valid Token?}
    D -->|No| C
    D -->|Yes| E{IP Allowed?}
    E -->|No| F[403 Forbidden]
    E -->|Yes| G{Rate Limit OK?}
    G -->|No| H[429 Too Many Requests]
    G -->|Yes| I{Command Allowed?}
    I -->|No| J[400 Command Not Allowed]
    I -->|Yes| K[Execute Command]
```

## ğŸ“¦ ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«è¨­è¨ˆ

### 1. server.js - ãƒ¡ã‚¤ãƒ³ã‚µãƒ¼ãƒãƒ¼
```javascript
// ä¸»è¦è²¬å‹™
- MCPãƒ—ãƒ­ãƒˆã‚³ãƒ«å®Ÿè£…
- HTTPã‚µãƒ¼ãƒãƒ¼ç®¡ç†
- ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°åˆ¶å¾¡
- ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œç®¡ç†
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

// ä¾å­˜é–¢ä¿‚
- Express.js (HTTP server)
- child_process (å¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ)
- SSH2 (ãƒªãƒ¢ãƒ¼ãƒˆæ¥ç¶š)
- ping (ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨ºæ–­)
```

### 2. utils/security.js - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ¤œè¨¼
```javascript
class SecurityValidator {
  // ã‚³ãƒãƒ³ãƒ‰æ¤œè¨¼
  validatePowerShellCommand(command)
  validateBuildPath(path)
  validateBatchFilePath(path)
  validateIPAddress(ip)
  validateSSHCredentials(host, user, pass)
  
  // ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¢ãƒ¼ãƒ‰åˆ¶å¾¡
  isDangerousMode()
  isDevelopmentMode()
  isAllowedCommand(command)
}
```

### 3. utils/logger.js - æ§‹é€ åŒ–ãƒ­ã‚°
```javascript
class Logger {
  // ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«
  error(message, metadata)
  warn(message, metadata)
  info(message, metadata)
  debug(message, metadata)
  
  // ç‰¹åˆ¥ãªãƒ­ã‚°
  security(event, details)
  access(req, res, duration)
  
  // ãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†
  rotateLogFile(filePath)
  createLogDirectory()
}
```

### 4. utils/rate-limiter.js - ãƒ¬ãƒ¼ãƒˆåˆ¶é™
```javascript
class RateLimiter {
  checkRateLimit(clientIP)
  resetRateLimit(clientIP)
  getRemainingRequests(clientIP)
  
  // è¨­å®š
  requestsPerWindow: 60
  windowMs: 60000
  cleanupInterval: 300000
}
```

### 5. utils/crypto.js - æš—å·åŒ–
```javascript
class CryptoManager {
  // æš—å·åŒ–
  encrypt(text)
  decrypt(encryptedData)
  
  // ãƒãƒƒã‚·ãƒ¥
  hashForLogging(sensitive)
  
  // éµç®¡ç†
  initializeKey()
  generateSalt()
}
```

## ğŸŒ ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 1. åŸºæœ¬æ§‹æˆ
```
Internet
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Firewall   â”‚ Port 8080 (configurable)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Windows VM   â”‚ 192.168.x.x
â”‚MCP Server   â”‚ 
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. NordVPN ãƒ¡ãƒƒã‚·ãƒ¥ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ§‹æˆ
```
        Internet
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”
    â–¼       â–¼       â–¼
â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”
â”‚VM-1 â”‚ â”‚VM-2 â”‚ â”‚VM-3 â”‚
â”‚10.5 â”‚ â”‚10.5 â”‚ â”‚10.5 â”‚
â”‚.0.1 â”‚ â”‚.0.2 â”‚ â”‚.0.3 â”‚
â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜
    â”‚       â”‚       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
    Mesh Network
    10.5.0.0/24
```

### 3. ãƒãƒ¼ãƒˆè¨­å®š
| ã‚µãƒ¼ãƒ“ã‚¹ | ãƒãƒ¼ãƒˆ | ãƒ—ãƒ­ãƒˆã‚³ãƒ« | ç”¨é€” |
|---------|-------|----------|------|
| MCP Server | 8080 | HTTP | ãƒ¡ã‚¤ãƒ³API |
| SSH | 22 | TCP | ãƒªãƒ¢ãƒ¼ãƒˆç®¡ç† |
| RDP | 3389 | TCP | GUIæ¥ç¶š |
| Custom | 3000-3010 | HTTP | é–‹ç™ºç”¨ |

## ğŸ’¾ ãƒ‡ãƒ¼ã‚¿ç®¡ç†

### 1. è¨­å®šç®¡ç†
```javascript
// ç’°å¢ƒå¤‰æ•°ã«ã‚ˆã‚‹è¨­å®š
process.env.MCP_AUTH_TOKEN        // èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³
process.env.ALLOWED_IPS           // IPåˆ¶é™
process.env.ALLOWED_BUILD_PATHS   // ãƒ“ãƒ«ãƒ‰ãƒ‘ã‚¹åˆ¶é™
process.env.ALLOWED_BATCH_DIRS    // ãƒãƒƒãƒãƒ•ã‚¡ã‚¤ãƒ«åˆ¶é™
process.env.ENABLE_DEV_COMMANDS   // é–‹ç™ºãƒ¢ãƒ¼ãƒ‰
process.env.ENABLE_DANGEROUS_MODE // å±é™ºãƒ¢ãƒ¼ãƒ‰
```

### 2. ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿
```
server/src/logs/
â”œâ”€â”€ access.log      # HTTP ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°
â”œâ”€â”€ security.log    # ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆ
â”œâ”€â”€ error.log       # ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°
â”œâ”€â”€ app.log         # ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚°
â””â”€â”€ debug.log       # ãƒ‡ãƒãƒƒã‚°æƒ…å ±
```

### 3. ä¸€æ™‚ãƒ‡ãƒ¼ã‚¿
- **ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼**: ãƒ¡ãƒ¢ãƒªå†…Map
- **SSHæ¥ç¶šãƒ—ãƒ¼ãƒ«**: æ¥ç¶šå†åˆ©ç”¨
- **ãƒ—ãƒ­ã‚»ã‚¹è¿½è·¡**: å®Ÿè¡Œä¸­ã‚³ãƒãƒ³ãƒ‰ã®ç®¡ç†

## ğŸ”§ æ‹¡å¼µæ€§è¨­è¨ˆ

### 1. æ–°ãƒ„ãƒ¼ãƒ«ã®è¿½åŠ 
```javascript
// server.jså†…ã®toolsé…åˆ—ã«è¿½åŠ 
{
  name: 'new_tool',
  description: 'New tool description',
  inputSchema: {
    type: 'object',
    properties: {
      param1: { type: 'string' },
      param2: { type: 'number' }
    },
    required: ['param1']
  }
}

// tools/call switchæ–‡ã«ã‚±ãƒ¼ã‚¹è¿½åŠ 
case 'new_tool':
  // Implementation
  break;
```

### 2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼ã®æ‹¡å¼µ
```javascript
// security.jså†…ã®é…åˆ—ã«è¿½åŠ 
this.allowedCommands.push('new-command');
this.dangerousPatterns.push(/dangerous-pattern/gi);
```

### 3. èªè¨¼æ–¹å¼ã®æ‹¡å¼µ
- OAuth 2.0çµ±åˆã®æº–å‚™
- LDAP/Active Directoryé€£æº
- è¨¼æ˜æ›¸ãƒ™ãƒ¼ã‚¹èªè¨¼

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­è¨ˆ

### 1. å¿œç­”æ™‚é–“ç›®æ¨™
| æ“ä½œã‚¿ã‚¤ãƒ— | ç›®æ¨™å¿œç­”æ™‚é–“ |
|-----------|-------------|
| åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰ | < 1ç§’ |
| ãƒ“ãƒ«ãƒ‰æ“ä½œ | < 300ç§’ |
| ãƒ•ã‚¡ã‚¤ãƒ«åŒæœŸ | 10MB/ç§’ |
| SSHæ¥ç¶š | < 5ç§’ |

### 2. ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£
- **æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°**: è¤‡æ•°Windows VMã®è² è·åˆ†æ•£
- **å‚ç›´ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°**: CPU/ãƒ¡ãƒ¢ãƒªå¢—å¼·ã«ã‚ˆã‚‹æ€§èƒ½å‘ä¸Š
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥**: ãƒ“ãƒ«ãƒ‰çµæœã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥

### 3. ãƒªã‚½ãƒ¼ã‚¹ç›£è¦–
```javascript
// ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ç›£è¦–
process.memoryUsage()

// CPUä½¿ç”¨ç‡ç›£è¦–
process.cpuUsage()

// ã‚¤ãƒ™ãƒ³ãƒˆãƒ«ãƒ¼ãƒ—é…å»¶
setImmediate(() => {
  // é…å»¶æ¸¬å®š
});
```

## ğŸ”„ éšœå®³å¯¾ç­–ãƒ»å¾©æ—§

### 1. éšœå®³æ¤œçŸ¥
- **ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `/health`
- **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç›£è¦–**: ãƒ—ãƒ­ã‚»ã‚¹æ­»æ´»ç›£è¦–
- **ãƒªã‚½ãƒ¼ã‚¹ç›£è¦–**: CPUãƒ»ãƒ¡ãƒ¢ãƒªãƒ»ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨ç‡

### 2. è‡ªå‹•å¾©æ—§
```javascript
// ãƒ—ãƒ­ã‚»ã‚¹è‡ªå‹•å†èµ·å‹•
process.on('uncaughtException', (error) => {
  logger.error('Uncaught exception', { error: error.stack });
  // ã‚°ãƒ¬ãƒ¼ã‚¹ãƒ•ãƒ«ã‚·ãƒ£ãƒƒãƒˆãƒ€ã‚¦ãƒ³å¾Œå†èµ·å‹•
});

// ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯å¯¾ç­–
setInterval(() => {
  if (process.memoryUsage().heapUsed > MEMORY_THRESHOLD) {
    // ãƒ¡ãƒ¢ãƒªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
  }
}, 60000);
```

### 3. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥
- **è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«**: è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
- **ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«**: ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ä¿å­˜
- **ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**: Gitå±¥æ­´ç®¡ç†

## ğŸ“ˆ ç›£è¦–ãƒ»ãƒ¡ãƒˆãƒªã‚¯ã‚¹

### 1. åŸºæœ¬ãƒ¡ãƒˆãƒªã‚¯ã‚¹
- **ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°**: æ™‚é–“ã‚ãŸã‚Šã®APIå‘¼ã³å‡ºã—
- **å¿œç­”æ™‚é–“**: 95ãƒ‘ãƒ¼ã‚»ãƒ³ã‚¿ã‚¤ãƒ«
- **ã‚¨ãƒ©ãƒ¼ç‡**: 4xx/5xx ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç‡
- **åŒæ™‚æ¥ç¶šæ•°**: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•°

### 2. ãƒ“ã‚¸ãƒã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹
- **ãƒ“ãƒ«ãƒ‰æˆåŠŸç‡**: æˆåŠŸ/å¤±æ•—æ¯”ç‡
- **ãƒ„ãƒ¼ãƒ«ä½¿ç”¨ç‡**: ãƒ„ãƒ¼ãƒ«åˆ¥ä½¿ç”¨é »åº¦
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ™ãƒ³ãƒˆ**: ç•°å¸¸ã‚¢ã‚¯ã‚»ã‚¹æ¤œçŸ¥

### 3. ã‚¤ãƒ³ãƒ•ãƒ©ãƒ¡ãƒˆãƒªã‚¯ã‚¹
- **CPUä½¿ç”¨ç‡**: ãƒ—ãƒ­ã‚»ã‚¹CPUæ¶ˆè²»
- **ãƒ¡ãƒ¢ãƒªä½¿ç”¨ç‡**: ãƒ’ãƒ¼ãƒ—ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
- **ãƒ‡ã‚£ã‚¹ã‚¯I/O**: ãƒ­ã‚°æ›¸ãè¾¼ã¿è² è·
- **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯**: å¸¯åŸŸå¹…ä½¿ç”¨é‡

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆæˆ¦ç•¥

### 1. æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤
```powershell
# æœ¬ç•ªç’°å¢ƒè¨­å®š
$env:NODE_ENV = "production"
$env:MCP_AUTH_TOKEN = "secure-random-token"
$env:ALLOWED_IPS = "192.168.1.0/24"

# ã‚µãƒ¼ãƒ“ã‚¹ç™»éŒ²
New-Service -Name "MCPServer" -BinaryPathName "node server.js"
```

### 2. é–‹ç™ºç’°å¢ƒ
```bash
# é–‹ç™ºãƒ¢ãƒ¼ãƒ‰èµ·å‹•
ENABLE_DEV_COMMANDS=true npm run dev

# å±é™ºãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ†ã‚¹ãƒˆç”¨ï¼‰
ENABLE_DANGEROUS_MODE=true npm start
```

### 3. ç¶™ç¶šçš„ã‚¤ãƒ³ãƒ†ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- **è‡ªå‹•ãƒ†ã‚¹ãƒˆ**: Jest + ã‚«ãƒãƒ¬ãƒƒã‚¸
- **é™çš„è§£æ**: ESLint + ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ¤œæŸ»
- **è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤**: GitHub Actions

---

## ğŸ“š æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| å±¤ | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|----|------|----------|------|
| **ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ** | Node.js | 18+ | JavaScriptãƒ©ãƒ³ã‚¿ã‚¤ãƒ  |
| **Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯** | Express.js | 4.x | HTTPã‚µãƒ¼ãƒãƒ¼ |
| **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£** | Helmet | 7.x | HTTPãƒ˜ãƒƒãƒ€ãƒ¼ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ |
| **æš—å·åŒ–** | Node Crypto | Built-in | AESæš—å·åŒ– |
| **SSH** | SSH2 | 1.16+ | ãƒªãƒ¢ãƒ¼ãƒˆæ¥ç¶š |
| **ãƒ†ã‚¹ãƒˆ** | Jest | 29.x | ãƒ¦ãƒ‹ãƒƒãƒˆãƒ»çµ±åˆãƒ†ã‚¹ãƒˆ |
| **ãƒ­ã‚°** | Custom Logger | - | æ§‹é€ åŒ–ãƒ­ã‚° |
| **ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†** | Child Process | Built-in | å¤–éƒ¨ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ |

---

**Windows MCP Server v1.0.6**  
**ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ›´æ–°æ—¥: 2025-07-04**  
**ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºãƒ¬ãƒ™ãƒ«ã®åˆ†æ•£ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§ã€å®‰å…¨æ€§ã¨æ‹¡å¼µæ€§ã‚’ä¸¡ç«‹**